# Copyright 2014 Lockheed Martin Corporation
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may 
# not use this file except in compliance with the License. You may obtain 
# a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software 
# distributed under the License is distributed on an "AS IS" BASIS, 
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and 
# limitations under the License.

---

properties:
  scene:
    get: |
      if ( !this.scene ) {
        this.scene = this.find( this.scenePath || "/" )[ 0 ];
        if ( !this.scene ) {
          this.logger.errorx( "scene.get", "Could not find scene node: '", this.scenePath, "'" );
        }
      }
      return this.scene;
      //@ sourceURL=sceneGetter.scene.get
  scenePath:
    set: |
      if ( value === this.scenePath ) {
        return;
      }
      this.scenePath = value;
      // Nullify the current scene so that next time it is gotten, it will find it from the new path
      this.scene = null;
      //@ sourceURL=sceneGetter.scenePath.set

methods:

  # A helper that does basically what Find does, except that it handles some of
  #   the busywork (and assumes that we'll be looking in the scene).
  # NOTE: THIS ONLY GETS THE FIRST OBJECT FOUND.  If you want the whole array,
  #   you'll need to extend this function (or write another).
  # Arguments: 
  #   objectName      - the name of the object to search for
  #   errorOnNotFound - if true (the default) we log an error if the object is
  #                     not found.
  #   warnOnTooMany   - if true (the default) we log a warning if more than one
  #                     object is found.
  findInScene:

  # Same as findInScene, except that this looks by type rather than by name.
  # NOTE: THIS ONLY GETS THE FIRST OBJECT FOUND.  If you want the whole array,
  #   you'll need to extend this function (or write another).
  # Arguments: 
  #   typeName        - the type to search for (where the "type" is the filename 
  #                     that the object extends).
  #   errorOnNotFound - if true (the default) we log an error if the object is
  #                     not found.
  #   warnOnTooMany   - if true (the default) we log a warning if more than one
  #                     object is found.
  findTypeInScene:

scripts:
- source: "http://vwf.example.com/sceneGetter.js"
